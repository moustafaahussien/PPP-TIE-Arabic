<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ø¬Ø³ÙˆØ± Ø§Ù„ØªÙØ§Ø¤Ù„</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #e8f5ff, #d1ebff);
    height: 100vh;
    overflow: hidden;
  }
  
  /* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© */
  .page-title {
    text-align: center;
    color: #2c3e50;
    font-size: 2.5em;
    margin: 20px 0;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
  }
  
  /* ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© */
  .page-footer {
    position: fixed;
    bottom: 10px;
    left: 0;
    width: 100%;
    text-align: center;
    color: #495057;
    font-size: 14px;
    padding: 10px;
    background: rgba(255,255,255,0.8);
    border-top: 1px solid #dee2e6;
    z-index: 100;
    font-weight: bold;
  }
  
  #container {
    position: relative;
    width: 100vw;
    height: calc(100vh - 120px);
    overflow: hidden;
    margin-top: 20px;
  }
  
  /* Ø§Ù„Ù†Ù‡Ø± */
  #river {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(160deg, #2f7fd1, #3fa6ff, #5bc0ff);
    clip-path: polygon(0 10%, 20% 0%, 40% 12%, 60% 4%, 80% 14%, 100% 8%, 100% 90%, 80% 100%, 60% 88%, 40% 96%, 20% 86%, 0 92%);
    animation: riverFlow 20s infinite linear;
  }
  
  @keyframes riverFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  .bridge {
    position: absolute;
    width: 90%;
    left: 5%;
    height: 120px;
    background: linear-gradient(45deg, #f8f9fa, #e9ecef);
    border: 2px solid #dee2e6;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 15px 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 10;
  }
  
  .bridge:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    background: linear-gradient(45deg, #ffffff, #f8f9fa);
  }
  
  .bridge-label {
    font-weight: bold;
    color: #2c3e50;
    font-size: 16px;
    padding: 8px 12px;
    background: rgba(255,255,255,0.9);
    border-radius: 8px;
    border: 1px solid #e9ecef;
    text-align: center;
    margin-bottom: 15px;
  }
  
  .ticks-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    background: rgba(255,255,255,0.9);
    padding: 10px 15px;
    border-radius: 10px;
    border: 1px solid #dee2e6;
    position: relative;
  }
  
  .tick {
    width: 60px;
    height: 70px;
    background: #6c757d;
    border-radius: 10px;
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 14px;
    flex-direction: column;
    border: 2px solid transparent;
  }
  
  .tick:hover {
    background: #007bff;
    transform: scale(1.05);
    border-color: #ffffff;
  }
  
  .tick.active {
    background: #007bff;
    transform: scale(1.1);
    box-shadow: 0 0 15px rgba(0,123,255,0.7);
    border-color: #ffffff;
  }
  
  .tick-number {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
  }
  
  .tick-label {
    font-size: 11px;
    text-align: center;
    line-height: 1.2;
    padding: 0 2px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    -webkit-text-stroke: 0.3px white;
    paint-order: stroke fill;
  }
  
  /* ØªØ³Ù…ÙŠØ§Øª Ø®Ø§ØµØ© Ù„ÙƒÙ„ Ø¬Ø³Ø± */
  .tick[data-value="1"] .tick-label {
    color: #ff6b6b;
    font-weight: bold;
    font-size: 12px;
  }
  
  .tick[data-value="10"] .tick-label {
    color: #51cf66;
    font-weight: bold;
    font-size: 12px;
  }
  
  #popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 30px;
    border-radius: 15px;
    width: 400px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    display: none;
    z-index: 1000;
    border: 2px solid #007bff;
    text-align: center;
  }
  
  #popup h3 {
    color: #2c3e50;
    margin-bottom: 15px;
    font-size: 20px;
  }
  
  #popup p {
    margin: 10px 0;
    color: #495057;
    line-height: 1.6;
  }
  
  #p-degree {
    font-weight: bold;
    color: #007bff;
    font-size: 18px;
  }
  
  #popup button {
    margin-top: 20px;
    padding: 10px 25px;
    background: linear-gradient(45deg, #007bff, #0056b3);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
  }
  
  #popup button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,123,255,0.3);
  }
  
  .sun {
    position: absolute;
    top: 50px;
    right: 50px;
    width: 80px;
    height: 80px;
    background: radial-gradient(circle, #ffeb3b, #ffc107);
    border-radius: 50%;
    box-shadow: 0 0 30px #ffeb3b;
    animation: sunGlow 3s infinite alternate;
  }
  
  @keyframes sunGlow {
    0% { box-shadow: 0 0 30px #ffeb3b; }
    100% { box-shadow: 0 0 50px #ffeb3b, 0 0 70px #ffc107; }
  }
  
  .cloud {
    position: absolute;
    background: white;
    border-radius: 50px;
    animation: cloudMove 20s infinite linear;
  }
  
  .cloud::before, .cloud::after {
    content: '';
    position: absolute;
    background: white;
    border-radius: 50%;
  }
  
  .cloud1 {
    width: 100px;
    height: 40px;
    top: 30px;
    left: 10%;
    animation-duration: 25s;
  }
  
  .cloud2 {
    width: 120px;
    height: 50px;
    top: 80px;
    left: 40%;
    animation-duration: 30s;
  }
  
  .cloud3 {
    width: 80px;
    height: 35px;
    top: 150px;
    left: 70%;
    animation-duration: 20s;
  }
  
  @keyframes cloudMove {
    0% { transform: translateX(-100px); }
    100% { transform: translateX(calc(100vw + 100px)); }
  }
  
  #summary {
    position: fixed;
    bottom: 60px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255,255,255,0.95);
    padding: 15px 25px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    display: none;
    z-index: 100;
    border: 2px solid #28a745;
  }
  
  #summary button {
    margin-left: 10px;
    padding: 8px 15px;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
</style>
</head>
<body>

<!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© -->
<h1 class="page-title">Ø¬Ø³ÙˆØ± Ø§Ù„ØªÙØ§Ø¤Ù„</h1>

<div id="container">
  <div class="sun"></div>
  <div class="cloud cloud1"></div>
  <div class="cloud cloud2"></div>
  <div class="cloud cloud3"></div>
  
  <div id="river"></div>

  <!-- Ø§Ù„Ø¬Ø³ÙˆØ± Ø§Ù„Ø«Ù„Ø§Ø«Ø© -->
  <div class="bridge" style="top:10%" data-title="Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ">
    <div class="bridge-label">Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ</div>
    <div class="ticks-container" id="ticks1"></div>
  </div>
  
  <div class="bridge" style="top:40%" data-title="Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ">
    <div class="bridge-label">Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ</div>
    <div class="ticks-container" id="ticks2"></div>
  </div>
  
  <div class="bridge" style="top:70%" data-title="Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ">
    <div class="bridge-label">Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ</div>
    <div class="ticks-container" id="ticks3"></div>
  </div>
</div>

<!-- Ø§Ù„Ø¨ÙˆØ¨ Ø£Ø¨ -->
<div id="popup">
  <h3 id="p-title"></h3>
  <p id="p-degree"></p>
  <p id="p-message"></p>
  <button onclick="closePopup()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
</div>

<!-- Ù…Ù„Ø®Øµ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
<div id="summary">
  <span id="summary-text">Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª ØªÙ‚ÙŠÙŠÙ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø³ÙˆØ±!</span>
  <button onclick="showFinalResults()">Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</button>
  <button onclick="resetAll()">Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯</button>
</div>

<!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© -->
<div class="page-footer">
  ØªÙ… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ù…Ø´Ø±Ù Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ø±Ù† 21<br>Ù…ØµØ·ÙÙ‰ Ø­Ø³ÙŠÙ†
</div>

<script>
// ØªØ®Ø²ÙŠÙ† Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
let ratings = {
  "Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ": 0,
  "Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ": 0,
  "Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ": 0
};

// ØªØ³Ù…ÙŠØ§Øª Ø®Ø§ØµØ© Ù„ÙƒÙ„ Ø¬Ø³Ø±
const bridgeLabels = {
  "Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ": {
    1: "Ø¯Ø§Ø¦Ù…",
    10: "Ù…Ø¤Ù‚Øª"
  },
  "Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ": {
    1: "Ø´Ø§Ù…Ù„", 
    10: "Ø¬Ø²Ø¦ÙŠ"
  },
  "Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ": {
    1: "ØµØºÙŠØ±",
    10: "ÙƒØ¨ÙŠØ±"
  }
};

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ¯Ø±ÙŠØ¬Ø§Øª Ù„Ù„Ø¬Ø³ÙˆØ± Ø§Ù„Ø«Ù„Ø§Ø«Ø©
function createTicks() {
  const tickContainers = ['ticks1', 'ticks2', 'ticks3'];
  const questions = [
    "Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ",
    "Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ", 
    "Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ"
  ];

  tickContainers.forEach((containerId, index) => {
    const container = document.getElementById(containerId);
    container.innerHTML = '';
    const question = questions[index];
    
    for (let i = 1; i <= 10; i++) {
      const tick = document.createElement('div');
      tick.className = 'tick';
      tick.dataset.value = i;
      tick.setAttribute('data-value', i);
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ù‚Ù… ÙˆØ§Ù„ØªØ³Ù…ÙŠØ©
      const tickNumber = document.createElement('div');
      tickNumber.className = 'tick-number';
      tickNumber.textContent = i;
      
      const tickLabel = document.createElement('div');
      tickLabel.className = 'tick-label';
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ³Ù…ÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
      if (bridgeLabels[question] && bridgeLabels[question][i]) {
        tickLabel.textContent = bridgeLabels[question][i];
      }
      
      tick.appendChild(tickNumber);
      tick.appendChild(tickLabel);
      
      tick.onclick = (ev) => {
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¯Ø±ÙŠØ¬Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø³Ø± ÙÙ‚Ø·
        const allTicks = container.querySelectorAll('.tick');
        allTicks.forEach(t => t.classList.remove('active'));
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„ØªØ¯Ø±ÙŠØ¬ Ø§Ù„Ù…Ø®ØªØ§Ø±
        ev.target.classList.add('active');
        
        // Ø­ÙØ¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
        ratings[question] = i;
        saveRatings();
        
        showPopup(question, i);
        checkCompletion();
      };
      
      container.appendChild(tick);
    }
  });
}

function getMessage(question, level) {
  const messages = {
    "Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ": [
      "Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ØªØ¨Ø¯Ùˆ Ø¯Ø§Ø¦Ù…Ø©ØŒ Ù„ÙƒÙ† ØªØ°ÙƒØ± Ø£Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØªØºÙŠØ± Ù…Ø¹ Ø§Ù„ÙˆÙ‚Øª",
      "Ù‡Ù†Ø§Ùƒ Ø£Ù…Ù„ ÙÙŠ Ø§Ù„ØªØºÙŠØ±ØŒ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø­Ù„ÙˆÙ„",
      "Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ù…Ø¤Ù‚ØªØ© ÙˆØ³ÙˆÙ ØªØ²ÙˆÙ„ Ù‚Ø±ÙŠØ¨Ø§Ù‹",
      "Ø±Ø§Ø¦Ø¹! Ù‡Ø°Ø§ Ø§Ù„ØªÙØ§Ø¤Ù„ ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ ØªØ¬Ø§ÙˆØ² Ø§Ù„ØµØ¹ÙˆØ¨Ø§Øª Ø¨Ø³Ø±Ø¹Ø©"
    ],
    "Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ": [
      "Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø´Ø§Ù…Ù„Ø©ØŒ Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø­Ù„",
      "Ø§Ø¨Ø¯Ø£ Ø¨Ø­Ù„ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„ØµØºÙŠØ±Ø© Ø£ÙˆÙ„Ø§Ù‹",
      "Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¬Ø²Ø¦ÙŠØ© ÙˆÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ø§ Ø¨ÙØ¹Ø§Ù„ÙŠØ©",
      "Ù…Ù…ØªØ§Ø²! Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…Ø´ÙƒÙ„Ø©"
    ],
    "Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ": [
      "ÙƒÙ„ Ù…Ø¬Ù‡ÙˆØ¯ ÙŠØ­Ø¯Ø« ÙØ±Ù‚Ø§Ù‹ØŒ Ø­ØªÙ‰ Ù„Ùˆ Ø¨Ø¯Ø§ ØµØºÙŠØ±Ø§Ù‹",
      "Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©ØŒ ÙØ§Ù„ØªØºÙŠÙŠØ± ÙŠØ­Ø¯Ø« ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹",
      "Ù…Ø¬Ù‡ÙˆØ¯Ùƒ Ø³ÙŠØ­Ø¯Ø« ÙØ±Ù‚Ø§Ù‹ ÙƒØ¨ÙŠØ±Ø§Ù‹ Ù…Ø¹ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ©",
      "Ø±Ø§Ø¦Ø¹! Ù‡Ø°Ø§ Ø§Ù„Ø§Ø¹ØªÙ‚Ø§Ø¯ ÙŠØ¶Ø§Ø¹Ù Ù…Ù† ØªØ£Ø«ÙŠØ± Ù…Ø¬Ù‡ÙˆØ¯Ùƒ"
    ]
  };

  const questionMessages = messages[question];
  
  if (level <= 3) return questionMessages[0];
  if (level <= 6) return questionMessages[1];
  if (level <= 8) return questionMessages[2];
  return questionMessages[3];
}

function showPopup(title, degree) {
  document.getElementById('p-title').textContent = title;
  document.getElementById('p-degree').textContent = `Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${degree}/10`;
  document.getElementById('p-message').textContent = getMessage(title, degree);
  document.getElementById('popup').style.display = 'block';
}

function closePopup() {
  document.getElementById('popup').style.display = 'none';
}

function saveRatings() {
  localStorage.setItem('optimismRatings', JSON.stringify(ratings));
}

function loadRatings() {
  const saved = localStorage.getItem('optimismRatings');
  if (saved) {
    ratings = JSON.parse(saved);
    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    const questions = [
      "Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ",
      "Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ", 
      "Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ"
    ];
    
    questions.forEach((question, index) => {
      const rating = ratings[question];
      if (rating > 0) {
        const container = document.getElementById(`ticks${index + 1}`);
        const tick = container.querySelector(`.tick[data-value="${rating}"]`);
        if (tick) {
          container.querySelectorAll('.tick').forEach(t => t.classList.remove('active'));
          tick.classList.add('active');
        }
      }
    });
    checkCompletion();
  }
}

function checkCompletion() {
  const allRated = Object.values(ratings).every(rating => rating > 0);
  if (allRated) {
    document.getElementById('summary').style.display = 'block';
  }
}

function showFinalResults() {
  const total = Object.values(ratings).reduce((a, b) => a + b, 0);
  const average = total / 3;
  
  let finalMessage = `Ù†ØªÙŠØ¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${average.toFixed(1)}/10\n\n`;
  finalMessage += `â€¢ Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: ${ratings["Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ"]}/10\n`;
  finalMessage += `â€¢ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: ${ratings["Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ"]}/10\n`;
  finalMessage += `â€¢ ØªØ£Ø«ÙŠØ± Ù…Ø¬Ù‡ÙˆØ¯Ùƒ: ${ratings["Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ"]}/10\n\n`;
  
  if (average <= 4) {
    finalMessage += "ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø­Ø§ÙˆÙ„ Ø±Ø¤ÙŠØ© Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©ØŒ ÙÙƒÙ„ Ù…Ø´ÙƒÙ„Ø© Ù„Ù‡Ø§ Ø­Ù„!";
  } else if (average <= 7) {
    finalMessage += "ğŸŒŸ Ø¬ÙŠØ¯! Ø£Ù†Øª Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„ØµØ­ÙŠØ­ØŒ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ!";
  } else {
    finalMessage += "ğŸ‰ Ø±Ø§Ø¦Ø¹! Ù‡Ø°Ø§ Ù…Ø³ØªÙˆÙ‰ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„ØªÙØ§Ø¤Ù„ ÙˆØ§Ù„Ø«Ù‚Ø© ÙÙŠ Ø§Ù„Ù‚Ø¯Ø±Ø§Øª!";
  }
  
  alert(finalMessage);
}

function resetAll() {
  if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ù‚Ø§Ù‹ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù…Ù† Ø¬Ø¯ÙŠØ¯ØŸ")) {
    ratings = {
      "Ø¥Ù„Ù‰ Ù…ØªÙ‰ Ø³ØªØ³ØªÙ…Ø± Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ": 0,
      "Ù…Ø§ Ù…Ø¯Ù‰ Ù†ÙØ§Ø° Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ": 0,
      "Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ù‚Ù‚Ù‡ Ù…Ø¬Ù‡ÙˆØ¯ÙŠØŸ": 0
    };
    
    document.querySelectorAll('.tick').forEach(tick => {
      tick.classList.remove('active');
    });
    
    document.getElementById('summary').style.display = 'none';
    localStorage.removeItem('optimismRatings');
  }
}

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
window.addEventListener('load', function() {
  createTicks();
  loadRatings();
});

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨ÙˆØ¨ã‚¢ãƒƒãƒ— Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
window.addEventListener('click', function(event) {
  const popup = document.getElementById('popup');
  if (event.target === popup) {
    closePopup();
  }
});
</script>
</body>
</html>